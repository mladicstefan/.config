# ============================================
# TMUX CONFIGURATION - UBUNTU THEMED
# ============================================

# ============================================
# GENERAL SETTINGS
# ============================================
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"
set -g base-index 1
setw -g pane-base-index 1
set -g mouse on
set -g history-limit 10000
set -g focus-events on
set -g renumber-windows on
setw -g automatic-rename on
set -g set-titles on

# ============================================
# PREFIX KEY
# ============================================
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# ============================================
# KEY BINDINGS - BASIC
# ============================================

# Reload config easily
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# Better splits with | and -
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind '\' split-window -h -c "#{pane_current_path}"
bind _ split-window -v -c "#{pane_current_path}"

# New window in current path
bind c new-window -c "#{pane_current_path}"

# ============================================
# PANE NAVIGATION (VIM-STYLE)
# ============================================

# Switch panes with hjkl (with prefix)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Switch panes with Alt+arrows (NO PREFIX!)
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Resize panes with prefix + HJKL (repeatable)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Resize with Alt+Shift+arrows (NO PREFIX!)
bind -n M-S-Left resize-pane -L 2
bind -n M-S-Right resize-pane -R 2
bind -n M-S-Up resize-pane -U 2
bind -n M-S-Down resize-pane -D 2

# ============================================
# WINDOW NAVIGATION
# ============================================

# Switch windows with prefix + number
bind 1 select-window -t :1
bind 2 select-window -t :2
bind 3 select-window -t :3
bind 4 select-window -t :4
bind 5 select-window -t :5
bind 6 select-window -t :6
bind 7 select-window -t :7
bind 8 select-window -t :8
bind 9 select-window -t :9

# Switch windows with Ctrl+Shift+arrows (NO PREFIX!)
bind -n C-S-Left previous-window
bind -n C-S-Right next-window

# Swap windows
bind -r "<" swap-window -t -1 \; previous-window
bind -r ">" swap-window -t +1 \; next-window

# ============================================
# COPY MODE (VIM-STYLE)
# ============================================
setw -g mode-keys vi

# Enter copy mode with prefix + [
bind [ copy-mode
bind Escape copy-mode

# Copy mode bindings
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle

# Paste with prefix + ]
bind ] paste-buffer

# ============================================
# ADDITIONAL USEFUL BINDINGS
# ============================================

# Kill pane without confirmation
bind x kill-pane

# Kill window with confirmation
bind X confirm-before -p "kill-window #W? (y/n)" kill-window

# Kill session with confirmation
bind Q confirm-before -p "kill-session #S? (y/n)" kill-session

# Toggle pane zoom
bind z resize-pane -Z

# Synchronize panes (type in all panes at once)
bind S set-window-option synchronize-panes\; display "Sync #{?pane_synchronized,ON,OFF}"

# Break pane to new window
bind b break-pane -d

# Join pane from another window
bind @ choose-window 'join-pane -h -s "%%"'

# Toggle status bar
bind T set-option -g status

# ============================================
# UBUNTU THEMED STATUS BAR (RED/PURPLE)
# ============================================

# Status bar position and update interval
set -g status-position bottom
set -g status-interval 5
set -g status-justify centre

# Status bar colors (Ubuntu aubergine/orange theme)
set -g status-style bg='#2C001E',fg='#DD4814'

# Left side - Session name
set -g status-left-length 40
set -g status-left '#[fg=#E95420,bg=#2C001E,bold] [#S] #[fg=#AEA79F,bg=#2C001E] | '

# Right side - Date and Time
set -g status-right-length 60
set -g status-right '#[fg=#AEA79F,bg=#2C001E] %a %b %d #[fg=#E95420,bg=#2C001E,bold] %H:%M '

# Window status format
setw -g window-status-format '#[fg=#AEA79F,bg=#2C001E] #I:#W#F '
setw -g window-status-current-format '#[fg=#2C001E,bg=#E95420,bold] #I:#W#F '
setw -g window-status-separator ''

# Window status style
setw -g window-status-style fg='#AEA79F',bg='#2C001E'
setw -g window-status-current-style fg='#2C001E',bg='#E95420',bold
setw -g window-status-activity-style fg='#DD4814',bg='#2C001E',bold
setw -g window-status-bell-style fg='#FFFFFF',bg='#DF382C',bold

# Pane border colors
set -g pane-border-style fg='#5E2750'
set -g pane-active-border-style fg='#E95420',bg=default

# Message style
set -g message-style fg='#FFFFFF',bg='#E95420',bold
set -g message-command-style fg='#FFFFFF',bg='#5E2750'

# Clock mode
setw -g clock-mode-colour '#E95420'

# Copy mode colors
setw -g mode-style fg='#2C001E',bg='#E95420',bold

# ============================================
# DISPLAY SETTINGS
# ============================================
set -g display-panes-time 2000
set -g display-time 1000
set -g status-keys vi

# Display pane numbers in Ubuntu colors
set -g display-panes-active-colour '#E95420'
set -g display-panes-colour '#AEA79F'
