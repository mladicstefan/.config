{
    "layer": "top",
    "position": "top",
    "modules-left": [
        "clock",
        "hyprland/workspaces",
        "hyprland/window"
    ],
    "modules-center": [
        "custom/vpn-status",
        "custom/leaked-ip"
    ],
    "modules-right": [
        "cpu",
        "memory",
        "disk",
        "temperature",
        "pulseaudio",
        "backlight",
        "battery",
        "bluetooth"
    ],
    "reload_style_on_change": true,

    // --- Modules Left ---

    "hyprland/workspaces": {
        "format": "{name}",
        "persistent-workspaces": {
            "*": [1, 2, 3, 4, 5]
        }
    },

    "hyprland/window": {
        "format": "{class}",
        "max-length": 50,
        "tooltip": false,
        "rewrite": {
            "(.*) - Mozilla Firefox": "Firefox: $1",
            "(.*) - zsh": "Terminal"
        }
    },

    // --- Modules Center ---
    
    // MODIFIED: Calling the new script for combined interface and signal info
    "custom/vpn-status": {
        "format": "{}",
        "interval": 5,
        "exec": "~/.config/waybar/scripts/vpn-status.sh",
        "return-type": "json",
        "tooltip": true
    },
    
    "custom/leaked-ip": {
        "format": "LEAKED-IP: {}",
        "interval": 10,
        "exec": "ip -4 route get 1.1.1.1 | awk '{print $7}' | tr -d '\n'"
    },

    // --- Modules Right (System Status) ---
    
    "cpu": {
        "format": "CPU: {usage}%",
        "interval": 5
    },

    "memory": {
        "format": "RAM: {percentage}%",
        "interval": 5
    },

    "disk": {
        "format": "Disk: {percentage_used}% ({used}G)",
        "interval": 30,
        "path": "/"
    },

    "temperature": {
        "format": "Temp: {temperatureC}°C",
        "format-critical": "TEMP: {temperatureC}°C!",
        "interval": 5,
        "critical-threshold": 80
    },

    "pulseaudio": {
        "format": "Vol: {volume}% {format_source}",
        "format-source": "(Mic: {volume}% )",
        "format-source-muted": "(Mic: Muted)",
        "format-muted": "Vol: Muted {format_source}",
        "on-click": "pavucontrol"
    },
    
    "backlight": {
        "device": "intel_backlight",
        "format": "Light: {percent}%"
    },

    "battery": {
        "format": "Batt: {capacity}%",
        "format-charging": "CHG: {capacity}%",
        "format-plugged": "PLG: {capacity}%",
        "format-alt": "Batt: {time}",
        "states": {
            "warning": 30,
            "critical": 20
        }
    },
    
    "bluetooth": {
        "format-on": "BT: On",
        "format-off": "BT: Off",
        "format-connected": "BT: {num_connections} conn",
        "tooltip": true,
        "on-click": "rofi-bluetooth"
    },
    
    "clock": {
        "format": "{:%H:%M}",
        "tooltip-format": "{:%A, %B %d, %Y}",
        "interval": 1
    }
}
